% mmind-datalog---itertools.ps BEGIN

% CHn = color of hole n
% CL = class

itertools_product4(CH0,CH1,CH2,CH3,CL) :- isa(CH0,CL), isa(CH1,CL), isa(CH2,CL), isa(CH3,CL).    % sz = 1296 = NOC**NOH

% the rules based on follows are only valid when at least one follows() is defined ie when at least two items exist.
isNotTheOnly(X1,CL) :- isa(X1,CL), isa(X2,CL), X1 != X2.
isTheOnly(X0,CL) :- not isNotTheOnly(X0,CL), isa(X0,CL).
isNotTheFirstOfMany(X2,CL) :- follows(X2,X1,CL).
isNotTheLastOfMany(X1,CL) :- follows(X2,X1,CL).
isTheFirst(X1,CL) :- follows(X2,X1,CL), not isNotTheFirstOfMany(X1,CL).
isTheFirst(X1,CL) :- isTheOnly(X1,CL).
isTheLast(X2,CL) :- follows(X2,X1,CL), not isNotTheLastOfMany(X2,CL).
isTheLast(X1,CL) :- isTheOnly(X1,CL).

%test case:
%isa(s0,single).

%isa(d0,duo).
%isa(d1,duo).
%follows(d1,d0,duo).

%isa(t0,trio).
%isa(t1,trio).
%isa(t2,trio).
%follows(t1,t0,trio).
%follows(t2,t1,trio).



% mmind-datalog---itertools.ps END
